<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DATSPACE</title>

<link rel="icon" type="image/png" href="/dats.png">

<style>
html,body{
    margin:0;
    padding:0;
    background:black;
    color:white;
    font-family:Consolas, monospace;
    overflow:hidden;
}

canvas{
    position:fixed;
    top:0;
    left:0;
}

.tabs{
    position:fixed;
    top:40px;
    right:80px;
    font-size:30px;
    z-index:10;
}

.tab{
    margin-left:30px;
    cursor:pointer;
    display:inline-block;
}

.active{
    border:1px solid white;
    padding:6px 12px;
}

.internet-art-tab{
    position:fixed;
    top:40px;
    left:80px;
    font-size:30px;
    z-index:10;
}

.internet-art-tab a{
    color:white;
    text-decoration:none;
}

.content{
    position:fixed;
    bottom:120px;
    left:50%;
    transform:translateX(-50%);
    font-size:20px;
    text-align:center;
    z-index:10;
    max-width:900px;
}

a{ color:white; text-decoration:none; }

@media (max-width:768px){

    .internet-art-tab{
        top:100px;
        left:20px;
        font-size:12px;
    }

    .tabs{
        top:30px;
        right:20px;
        font-size:18px;
    }

    .tab{
        margin-left:15px;
    }

    .content{
        font-size:16px;
        bottom:80px;
        padding:0 20px;
    }
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<div class="internet-art-tab">
    <a href="/internet-art/">INTERNET-ART</a>
</div>

<div class="tabs">
    <span class="tab active">HOME</span>
    <span class="tab">EVENT</span>
    <span class="tab">LOCATION</span>
    <span class="tab">PROGRAM</span>
    <span class="tab">CONTACT</span>
</div>

<div class="content" id="content"></div>

<script>

/* ================= CANVAS SETUP ================= */

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener("resize",resizeCanvas);
resizeCanvas();

/* ================= STATE ================= */

let dragging=false;
let glitchFrames=0;
let frequency=440;
let volume=0.2;
let currentTab="HOME";
let showTitle=true;

const tabs=document.querySelectorAll(".tab");
const content=document.getElementById("content");

tabs.forEach(tab=>{
    tab.addEventListener("click",()=>{
        tabs.forEach(t=>t.classList.remove("active"));
        tab.classList.add("active");
        currentTab=tab.innerText;
        glitchFrames=12;
        triggerSound();
        updateContent();
    });
});

function updateContent(){

    if(currentTab==="HOME"){
        content.innerHTML="//DATSPACE";
        showTitle=true;
    }

    if(currentTab==="EVENT"){
        content.innerHTML="NO ACTIVE TRANSMISSION";
        showTitle=false;
    }

    if(currentTab==="LOCATION"){
        content.innerHTML=`<a href="https://maps.app.goo.gl/e7eK7yZ6L4t8fkuk7" target="_blank">
        Jalan Gatsu Timur No.88X, Denpasar, Bali</a>`;
        showTitle=true;
    }

    if(currentTab==="PROGRAM"){
        content.innerText="DatIn — Indoor AV / DatOut — Outdoor AV";
        showTitle=true;
    }

    if(currentTab==="CONTACT"){
        content.innerHTML="info@datspace.club<br>ig: @_____dats";
        showTitle=true;
    }
}

updateContent();

/* ========================== */
/* AUDIO ENGINE + INTERACTION (tetap sama) */
/* ========================== */

canvas.addEventListener("mousedown",()=>{
    dragging = true;
    glitchFrames = 12;
    triggerSound();
});

canvas.addEventListener("mouseup",()=> dragging=false);

canvas.addEventListener("mousemove",(e)=>{
    frequency = 100 + (e.clientX/window.innerWidth)*1200;
    let yNorm = 1 - (e.clientY/window.innerHeight);
    volume = Math.pow(yNorm,2.2)*0.5;
});

function draw(){

    ctx.fillStyle="black";
    ctx.fillRect(0,0,window.innerWidth,window.innerHeight);

    if(currentTab!=="EVENT" && showTitle){
        ctx.fillStyle="white";
        ctx.textAlign="center";
        ctx.font = Math.min(window.innerWidth/6, 180) + "px Consolas";
        ctx.fillText("DATs", window.innerWidth/2, window.innerHeight/2);
    }

    if(dragging){
        ctx.strokeStyle="white";
        for(let r=50;r<Math.min(window.innerWidth, window.innerHeight)/1.2;r+=40){
            let offset = Math.sin(Date.now()*0.002 + r*0.05)*20;
            ctx.beginPath();
            ctx.arc(window.innerWidth/2 + offset,
                    window.innerHeight/2,
                    r,0,Math.PI*2);
            ctx.stroke();
        }
    }

    if(glitchFrames>0){
        for(let i=0;i<120;i++){
            ctx.fillStyle=Math.random()>0.5?"white":"black";
            ctx.fillRect(
                Math.random()*window.innerWidth,
                Math.random()*window.innerHeight,
                Math.random()*400,
                Math.random()*80
            );
        }
        glitchFrames--;
    }

    requestAnimationFrame(draw);
}
draw();

const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function triggerSound(){

    if(audioCtx.state==="suspended"){
        audioCtx.resume();
    }

    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    const delay = audioCtx.createDelay();
    const feedbackGain = audioCtx.createGain();

    osc.type="sine";
    osc.frequency.value = frequency;

    gain.gain.value = volume;

    delay.delayTime.value = 0.3;
    feedbackGain.gain.value = 0.4;

    osc.connect(gain);
    gain.connect(delay);
    delay.connect(feedbackGain);
    feedbackGain.connect(delay);
    delay.connect(audioCtx.destination);
    gain.connect(audioCtx.destination);

    osc.start();
    osc.stop(audioCtx.currentTime + 0.35);
}

canvas.addEventListener("dblclick", ()=>{
    if (!document.fullscreenElement) {
        document.body.requestFullscreen();
    } else {
        document.exitFullscreen();
    }
});

</script>
</body>
</html>



